# PRD: 오늘 체육 뭐하지?

> **초·중·고 체육교사를 위한 수업·학급 관리 PWA**
>
> 작성일: 2026-02-09
> 업데이트: 2026-02-12
> 버전: 2.0
> 상태: 프로토타입 완성 → 프로덕션 전환

---

## 1. 프로젝트 개요

### 1.1 한 줄 요약
초·중·고 체육교사가 **날씨·대기질 확인 → 시간표 관리 → 수업 추천·설계 → 학급 관리**까지 하나의 앱에서 해결하는 모바일 퍼스트 PWA.

### 1.2 배경 및 문제 정의
체육교사는 매일 아침 다음을 반복한다:
- 기상청 앱에서 날씨 확인 → 에어코리아에서 미세먼지 확인 → 야외 가능 여부 판단
- 학년별·반별로 다른 진도를 수첩이나 엑셀로 추적
- 수업 중 팀 편성, 점수판, 타이머를 각각 다른 앱에서 실행
- 수업 아이디어를 유튜브에서 따로 검색

이 모든 워크플로우를 **한 화면**으로 통합한다.

### 1.3 대상 사용자
- **1차**: 나 (개발자 본인, 초등 체육 전담교사)
- **2차**: Google OAuth 연동 후 전국 초등 체육 전담교사 배포
- **3차**: 중·고등학교 체육교사로 점진적 확대 (활동 DB 확장)

### 1.4 핵심 가치
| 우선순위 | 가치 | 설명 |
|---------|------|------|
| 1 | **즉시성** | 교실 앞, 운동장에서 1초 만에 필요한 정보 확인 |
| 2 | **통합성** | 날씨+시간표+수업설계+학급을 한 앱에서 |
| 3 | **교육과정 정합성** | 2022 개정 교육과정 영역 체계 완전 반영 |
| 4 | **오프라인 대응** | PWA 서비스워커로 핵심 기능 오프라인 동작 |

### 1.5 교육과정 기반
**2022 개정 체육과 교육과정** 3개 영역 + 중영역 체계:

```
운동 💪
├── 체력 운동: 체력 요소별 운동 방법
└── 건강 활동: 건강 생활 습관, 안전

스포츠 ⚽
├── 기술형: 기술의 수월성을 겨루는 스포츠
├── 전략형: 전략에 따라 승패가 결정되는 스포츠
└── 생태형: 환경과의 상호작용 스포츠

표현 🎭
├── 스포츠 표현: 스포츠 맥락의 움직임 표현
├── 전통 표현: 전통 문화 기반 신체 표현
└── 현대 표현: 현대적 창작 움직임
```

**학년군별 기술 수준 (초등):**
- 3~4학년군: 기초기술 (FMS - Fundamental Movement Skills)
- 5~6학년군: 복합·응용기술

**중·고등 확장성:**
- 중학교: 2022 개정 체육과 교육과정 연계 (향후 활동 DB 확장 시)
- 고등학교: 선택 중심 교육과정 연계 (향후)
- 활동 DB에 `schoolLevel` 필드로 학교급 구분

---

## 2. 사용자 페르소나

### 페르소나 1: 초등 체육 전담교사 "김쌤"

| 항목 | 내용 |
|------|------|
| 담당 | 3~6학년 체육 전담 (주 22시간) |
| 학급 수 | 10~12개 학급 |
| 기기 | 아이폰 + 교실 내 아이패드 |
| 일과 | 아침에 날씨 확인 → 오전 4교시 연속 수업 → 오후 수업 → 진도 기록 |
| Pain Point | 학급이 많아 어떤 반이 뭘 했는지 헷갈림, 비 올 때 실내 수업 아이디어 부족 |
| 니즈 | 한 손으로 조작 가능, 수업 중 빠른 팀 편성, 영상 자료 바로 재생 |

### 페르소나 2: 중학교 체육교사 "박쌤"

| 항목 | 내용 |
|------|------|
| 담당 | 1~3학년 체육 (주 18시간) |
| 학급 수 | 6~9개 학급 |
| 기기 | 갤럭시 + 체육관 태블릿 |
| 일과 | 시간표 확인 → 종목별 수업 → 수행평가 관리 |
| Pain Point | 다양한 종목 수업안 부족, 학급별 진도 관리 어려움 |
| 니즈 | 종목별 수업 아이디어, 학급별 수업 기록 관리 |

### 핵심 사용 시나리오

**시나리오 1: 아침 수업 준비 (07:50)**
1. 앱 열기 → 홈 탭(🏠 오늘)에서 날씨·미세먼지 + 오늘 시간표 즉시 확인
2. "야외 가능" 확인 → 시간표에서 1교시 학급 터치 → 수업스케치로 이동
3. 수업스케치에서 5학년 필터 → 스포츠·전략형 선택 → "발야구" 추천
4. 양수쌤 영상 확인 → "수업 결정" 버튼 → 해당 학급 수업 기록 자동 저장

**시나리오 2: 시간표 기반 수업 전환 (10:00)**
1. 홈 탭에서 "현재 3교시 → 6-2반" 확인
2. 6-2반 터치 → 수업스케치로 바로 이동
3. 이전 수업 기록 확인 → 오늘 활동 추천받기

**시나리오 3: 갑자기 비 올 때 (10:00)**
1. 홈 탭에서 "🌧️ 실내 수업 추천" 자동 표시
2. 수업스케치 탭 → 날씨 기반 자동 필터가 실내 활동만 표시
3. "요가·스트레칭" 추천 → 바로 수업 전환

---

## 3. 기술 스택

### 3.1 프론트엔드
| 기술 | 버전 | 용도 |
|------|------|------|
| React | 18+ | UI 프레임워크 |
| Vite | 5+ | 빌드 도구 |
| React Router | 6+ | SPA 라우팅 |
| Tailwind CSS | 3+ | 스타일링 |
| Workbox | 7+ | PWA 서비스워커 |
| react-hot-toast | - | 토스트 알림 |

### 3.2 백엔드 / BaaS
| 기술 | 용도 |
|------|------|
| Firebase Auth | Google OAuth 로그인 |
| Cloud Firestore | 데이터 저장 (학급, 명단, 수업 기록, 시간표) |
| Firebase Hosting | 정적 파일 호스팅 |
| Cloud Functions (선택) | API 프록시 (기상청, 에어코리아 키 보호) |

### 3.3 외부 API
| API | 제공처 | 용도 |
|-----|--------|------|
| 기상청 단기예보 | 공공데이터포털 | 하늘상태, 기온, 강수확률 |
| 에어코리아 대기오염정보 | 공공데이터포털 | PM10, PM2.5 등급 |
| 기상청 생활기상지수 (선택) | 공공데이터포털 | 자외선 지수 |
| YouTube Data API v3 | Google Cloud | 양수쌤 채널 영상 검색 |

### 3.4 개발 환경
| 도구 | 용도 |
|------|------|
| Claude Code | AI 페어 프로그래밍 |
| pnpm | 패키지 매니저 |
| ESLint + Prettier | 코드 품질 |
| Vercel (대안) | 프리뷰 배포 |

---

## 4. 정보 구조 (IA)

### 4.1 탭 구조

```
[🏠 오늘] [🌤️ 날씨] [📅 시간표] [✏️ 수업스케치] [📋 학급]
```

**기존 탭 대비 변경 사항:**
| 기존 탭 | 변경 | 설명 |
|---------|------|------|
| 🏠 홈 | → 🏠 오늘 | 대시보드 허브 역할 강화 |
| 🎲 추천 | → ✏️ 수업스케치에 통합 | 추천+설계+영상 통합 |
| 📋 학급 | → 📋 학급 (유지) | 기존 동일 |
| 🛠 도구 | → 향후 확장 | 타이머/스코어보드/팀편성은 Phase 5 |
| 🎬 영상 | → ✏️ 수업스케치에 통합 | 추천 결과와 연동 |
| (없음) | → 🌤️ 날씨 (신규) | 독립 탭으로 승격 |
| (없음) | → 📅 시간표 (신규) | 핵심 기능으로 승격 |

### 4.2 전체 화면 흐름도

```
┌─────────────────────────────────────────────────────────────┐
│  앱 진입                                                     │
│  ├── (미로그인) → 로그인 화면 → Google OAuth                   │
│  └── (로그인됨) → 학급 설정 여부 체크                           │
│       ├── (미설정) → 학급 설정 위저드                           │
│       └── (설정됨) → 홈 탭 (🏠 오늘)                          │
│                                                              │
│  ⚙️ 설정 버튼 (헤더 우측)                                     │
│  └── 학급 설정 위저드 (언제든 재진입 가능)                       │
│       ├── Step 1: 학교급 선택 (초등/중등/고등)                  │
│       ├── Step 2: 담당 학년 선택 (학교급에 따라 동적)            │
│       ├── Step 3: 학년별 반 수 설정 (1~15반)                   │
│       └── Step 4: 학급별 학생 수 설정 (기본 25명)               │
└─────────────────────────────────────────────────────────────┘

┌─ 🏠 오늘 (대시보드) ─────────────────────────────────────────┐
│                                                              │
│  🌤️ 날씨 미니 위젯                                           │
│  맑음 24℃ | PM10 좋음 | 야외 가능 ✅                          │
│  [상세보기 →]                                                 │
│                                                              │
│  📅 오늘 시간표                                               │
│  1교시 6-1 | 2교시 6-2 | 3교시 6-3 (현재 ◀)                  │
│  [시간표 전체 →]                                              │
│                                                              │
│  ✏️ 최근 수업                                                 │
│  6-2 발야구 [스포츠] 2/12                                     │
│  6-1 피구 [스포츠] 2/11                                       │
│  [수업스케치 →]                                               │
│                                                              │
│  📋 학급 현황                                                 │
│  3학년 (3반) | 4학년 (3반) | 5학년 (3반)                      │
│  [학급 관리 →]                                                │
│                                                              │
└──────────────────────────────────────────────────────────────┘

┌─ 🌤️ 날씨 (상세) ────────────────────────────────────────────┐
│                                                              │
│  현재 날씨 (대형 표시)                                        │
│  ┌──────────────────────────────────┐                        │
│  │ ☀️ 맑음  24℃                     │                        │
│  │ 강수확률 10% | 습도 45%           │                        │
│  │ 야외 수업 ✅ 최적                 │                        │
│  └──────────────────────────────────┘                        │
│                                                              │
│  대기질 정보                                                  │
│  ┌──────────────────────────────────┐                        │
│  │ PM10: 35㎍/㎥ (좋음)             │                        │
│  │ PM2.5: 15㎍/㎥ (좋음)            │                        │
│  │ UV 지수: 5 (보통)                │                        │
│  └──────────────────────────────────┘                        │
│                                                              │
│  시간별 예보 (가로 스크롤)                                     │
│  [09시 ☀️ 22℃] [10시 ☀️ 24℃] [11시 ⛅ 25℃] ...            │
│                                                              │
│  야외수업 자동 판단                                            │
│  ┌──────────────────────────────────┐                        │
│  │ ✅ 강수: 없음                     │                        │
│  │ ✅ 미세먼지: 좋음                  │                        │
│  │ ✅ 기온: 24℃ (적정)               │                        │
│  │ 결론: 야외 수업 최적               │                        │
│  └──────────────────────────────────┘                        │
│                                                              │
└──────────────────────────────────────────────────────────────┘

┌─ 📅 시간표 ──────────────────────────────────────────────────┐
│                                                              │
│  [< 이번 주 >]  [편집 모드]                                   │
│                                                              │
│  ┌─────┬──────┬──────┬──────┬──────┬──────┐                 │
│  │     │  월  │  화  │  수  │  목  │  금  │                 │
│  ├─────┼──────┼──────┼──────┼──────┼──────┤                 │
│  │ 1교시│ 3-1  │ 4-2  │      │ 5-1  │ 3-2  │                 │
│  │ 2교시│ 3-2  │ 4-3  │ 6-1  │ 5-2  │ 3-3  │                 │
│  │ 3교시│ 4-1  │ 5-1  │ 6-2  │ 6-1  │ 4-1  │                 │
│  │ 4교시│ 4-2  │ 5-2  │ 6-3  │ 6-2  │ 4-2  │                 │
│  │ 5교시│      │ 5-3  │      │ 6-3  │      │                 │
│  │ 6교시│      │      │      │      │      │                 │
│  └─────┴──────┴──────┴──────┴──────┴──────┘                 │
│                                                              │
│  📌 오늘 (수요일)                                             │
│  3교시 → 6-2 [수업스케치 →]                                   │
│  현재 교시 하이라이트 (초록색 테두리)                            │
│                                                              │
│  편집 모드:                                                   │
│  - 각 셀 터치 → 학급 선택 드롭다운                              │
│  - 드래그&드롭으로 교시 이동 (데스크톱)                          │
│  - 빈 셀은 "공강" 표시                                        │
│                                                              │
└──────────────────────────────────────────────────────────────┘

┌─ ✏️ 수업스케치 ──────────────────────────────────────────────┐
│                                                              │
│  학급 선택: [3-1 ▼]  (시간표에서 자동 선택 가능)               │
│                                                              │
│  ── 🎯 활동 추천 ──────────────────────────────────────────── │
│  학년: [3][4][5][6]                                          │
│  영역: [💪운동] [⚽스포츠] [🎭표현]                            │
│  세부: (선택 영역의 중영역)                                    │
│  날씨: [자동 필터 적용 중: 야외 가능 ✅]                       │
│  [🎲 추천받기]                                                │
│                                                              │
│  ── 추천 결과 ─────────────────────────────────────────────── │
│  [발야구(킥런볼)]                                             │
│  ⚽ 스포츠 > 전략형 | 40분 | ⭐⭐ | 3~6학년                   │
│  🎒 발야구공, 콘                                              │
│  📝 설명 텍스트...                                            │
│  ▶️ 관련 영상 (양수쌤)                                        │
│  [✅ 수업 결정] [🔄 다시 추천]                                 │
│                                                              │
│  ── ✏️ 수업 메모 (선택) ──────────────────────────────────── │
│  [오늘 수업 한 줄 메모...]                                     │
│                                                              │
└──────────────────────────────────────────────────────────────┘

┌─ 📋 학급 ────────────────────────────────────────────────────┐
│  헤더: [📋 학급 관리] [⚙️ 학급 재설정]                         │
│  ┌──────────────────────────────────┐                        │
│  │ 학급 목록 (학년별 그룹핑)          │                        │
│  │ 3학년 (3개 반)                    │                        │
│  │ ├─ 1반 [명단 24/24] 24명 ...     │                        │
│  │ ├─ 2반 [명단 미입력] 25명 ...     │                        │
│  │ └─ 3반 [명단 20/23] 23명 ...     │                        │
│  │ 4학년 (3개 반)                    │                        │
│  │ └─ ...                            │                        │
│  └──────────────────────────────────┘                        │
│                                                              │
│  (학급 선택 시 아래 패널 확장)                                  │
│  ┌──────────────────────────────────┐                        │
│  │ 🏫 5학년 3반                      │                        │
│  │ [학생수 26명] [명단 26명] [수업 8회]│                        │
│  │                                    │                        │
│  │ 탭: [👤 명단관리][📋 일괄입력][📖 수업이력]                  │
│  │                                    │                        │
│  │ 👤 명단 관리 뷰                    │                        │
│  │ ┌────────────────────────────┐    │                        │
│  │ │ [1] [이름입력___] [남][여] 🗑│    │                        │
│  │ │ [2] [김민준____] [남][  ] 🗑│    │                        │
│  │ │ [3] [이서윤____] [  ][여] 🗑│    │                        │
│  │ │ ...                         │    │                        │
│  │ └────────────────────────────┘    │                        │
│  │ [+ 학생 추가] [🔢 번호 재정렬]     │                        │
│  │ 성별 통계: 남 13명 | 여 12명      │                        │
│  │                                    │                        │
│  │ 📋 일괄 입력 뷰                    │                        │
│  │ ┌────────────────────────────┐    │                        │
│  │ │ 한 줄에 한 명씩 이름 입력    │    │                        │
│  │ │ 김민준                       │    │                        │
│  │ │ 이서윤                       │    │                        │
│  │ │ 박지호                       │    │                        │
│  │ │ ...                         │    │                        │
│  │ └────────────────────────────┘    │                        │
│  │ [기존 명단 불러오기] [✅ 명단 적용]  │                        │
│  │ 💡 나이스에서 복사 붙여넣기 가능     │                        │
│  │                                    │                        │
│  │ 📖 수업 이력 뷰                    │                        │
│  │ 발야구 [스포츠][전략형] 2/7        │                        │
│  │ 피구   [스포츠][전략형] 2/5        │                        │
│  └──────────────────────────────────┘                        │
└──────────────────────────────────────────────────────────────┘
```

---

## 5. 핵심 기능 명세

### 5.1 학급 설정 위저드

| 항목 | 상세 |
|------|------|
| 진입점 | 헤더 ⚙️ 버튼, 홈 탭 미설정 안내, 학급 탭 "재설정" 버튼 |
| Step 1 | 학교급 선택: 초등학교 / 중학교 / 고등학교 |
| Step 2 | 담당 학년 복수 선택 (초등: 1~6학년, 중등: 1~3학년, 고등: 1~3학년) |
| Step 3 | 학년별 반 수 설정 (1~15반, +/- 버튼) |
| Step 4 | 학급별 학생 수 개별 조정 (기본 25명, 1~45명) |
| 완료 | 학급 자동 생성 + 빈 명단(번호만) 초기화 |
| 재설정 | 기존 설정값 프리필, 경고 후 덮어쓰기 |

**비즈니스 로직:**
- 학교급 선택에 따라 학년 선택지 동적 변경
- 학급 생성 시 각 학급에 학생 수만큼 빈 명단(번호만 할당)이 자동 생성됨
- 설정 미완료 시 헤더 ⚙️ 버튼에 펄스 애니메이션으로 유도
- 학급 설정 변경 시 기존 수업 기록은 유지 여부 확인 필요

### 5.2 학급 명단 관리

| 기능 | 상세 |
|------|------|
| 개별 입력 | 학생별 이름 텍스트 필드, 성별(남/여) 토글, 메모 |
| 일괄 입력 | 텍스트에어리어에 줄바꿈/쉼표 구분으로 이름 붙여넣기 |
| 학생 추가/삭제 | +버튼으로 추가, 🗑 + 확인으로 삭제 |
| 번호 재정렬 | 삭제 후 빈 번호 재배치 |
| 상태 표시 | 학급 목록에 "명단 N/N" 또는 "명단 미입력" 배지 |
| 성별 통계 | 남/여/미지정 카운트 자동 표시 |

**일괄 입력 로직:**
```
입력: "김민준\n이서윤\n박지호"
→ 1번 학생 이름 = 김민준
→ 2번 학생 이름 = 이서윤
→ 3번 학생 이름 = 박지호
→ 이름 수가 학생 수보다 많으면 학생 자동 추가
→ 기존 이름이 있으면 덮어쓰기
```

### 5.3 날씨·대기질 상세 탭

홈 탭의 미니 위젯과 별개로, 독립된 날씨 탭에서 상세 정보를 제공한다.

**API 3종 통합:**

| API | 데이터 | 갱신 주기 |
|-----|--------|----------|
| 기상청 단기예보 | 하늘상태(SKY), 강수형태(PTY), 기온, 강수확률 | 3시간 |
| 에어코리아 | PM10, PM2.5, 등급 | 1시간 |
| 기상청 생활기상지수 | 자외선 지수 | 1일 |

**날씨 탭 구성:**
- 현재 날씨 대형 카드 (하늘상태 아이콘 + 기온 + 체감온도)
- 대기질 정보 카드 (PM10, PM2.5, UV 지수)
- 시간별 예보 (가로 스크롤, 3시간 단위)
- 야외수업 자동 판단 결과 (체크리스트 형태)

**야외수업 자동 판단 로직:**
```
1순위: 강수형태 ≠ "없음" → ❌ 실내 수업 추천 (사유: "비/눈 예보")
2순위: PM10 > 80㎍/㎥ (나쁨) → ❌ 실내 수업 권장 (사유: "미세먼지 나쁨")
3순위: 기온 < -5℃ 또는 > 33℃ → ❌ 실내 수업 권장 (사유: "기온 부적합")
4순위: PM10 > 50㎍/㎥ (보통 상위) → ⚠️ 야외 가능(마스크 권장)
기본: ✅ 야외 수업 최적
```

**홈 탭 미니 위젯:**
- 한 줄 요약: 하늘상태 | 기온 | 미세먼지 등급 | 야외 가능 여부
- [상세보기 →] 터치 → 날씨 탭으로 이동

**위치 설정:**
- 프로토: 학교 좌표 하드코딩 (대전 서구)
- 프로덕션: 학교 주소 입력 → 좌표 변환 저장

### 5.4 시간표 관리 (신규)

체육 전담교사의 핵심 워크플로우인 "오늘 몇 교시에 어떤 반?" 질문에 즉시 답하는 기능.

**기능 목록:**

| 기능 | 상세 |
|------|------|
| 시간표 그리드 | 5일(월~금) × 최대 7교시 배정 테이블 |
| 학급 배정 | 각 셀에 등록된 학급 중 선택하여 배정 |
| 오늘 하이라이트 | 오늘 요일 열 강조 표시 |
| 현재 교시 | 현재 시간 기반으로 해당 교시 셀 하이라이트 |
| 수업스케치 연동 | 교시 셀 터치 → 해당 학급 수업스케치로 바로 이동 |
| 편집 모드 | 토글로 전환, 셀 터치하면 학급 선택 드롭다운 |
| 공강 표시 | 미배정 셀은 빈칸 또는 "-" 표시 |

**교시 시간 기준 (초등 기본값):**
| 교시 | 시작 | 종료 |
|------|------|------|
| 1교시 | 09:00 | 09:40 |
| 2교시 | 09:50 | 10:30 |
| 3교시 | 10:40 | 11:20 |
| 4교시 | 11:30 | 12:10 |
| 5교시 | 13:10 | 13:50 |
| 6교시 | 14:00 | 14:40 |
| 7교시 | 14:50 | 15:30 |

> 교시 시간은 학교별로 다를 수 있으므로, 향후 커스텀 설정 지원 예정.

**홈 탭 연동:**
- 오늘 시간표를 가로 리스트로 요약 표시
- 현재 교시 학급에 ◀ 마커
- [시간표 전체 →] 링크

### 5.5 수업스케치 (추천 + 설계 + 영상 통합)

기존 `추천 탭` + `영상 탭`을 하나로 통합하고, 수업 설계 기능을 추가.

**5.5.1 활동 추천 (기존 추천 엔진 통합)**

필터 체계 (3단 캐스케이드):
```
학년 → 영역(운동/스포츠/표현) → 중영역(기술형/전략형/...)
```

추천 로직:
1. 날씨 자동 필터: 비/미세먼지 나쁨 → `rainOk: true`인 활동만
2. 사용자 선택 필터 적용
3. 필터링된 풀에서 랜덤 1개 추천
4. 풀이 비면 `rainOk: true` 전체에서 추천 (fallback)

**5.5.2 추천 결과 카드**

추천 결과에 다음을 모두 포함:
- 영역/세부영역 태그 (색상 구분)
- 활동명, 설명
- 메타 정보: 소요시간, 난이도(⭐1~3), 대상학년
- 준비물 목록
- **관련 영상 섹션**: `youtubeKeyword` 기반 양수쌤 영상 링크/미리보기
- 액션: [✅ 수업 결정] → 학급에 수업 기록 / [🔄 다시 추천] → 재추천

**5.5.3 수업 메모**

- 추천 결과 하단에 한 줄 메모 필드
- "수업 결정" 시 메모도 함께 수업 기록에 저장
- 선택사항 (빈칸 허용)

**5.5.4 학급 선택**

- 상단에 학급 선택 드롭다운
- 시간표에서 진입 시 해당 학급 자동 선택
- 학급 선택 시 해당 학급의 이전 수업 기록 참고 가능

**5.5.5 양수쌤 유튜브 연동**

| 항목 | 상세 |
|------|------|
| 채널 | 두근두근 양수쌤의 꿀잼 놀이체육 교실 (UCrFNcTAsT8uv2otdMUf_rwg) |
| 채널 URL | https://www.youtube.com/@양수쌤체육수업 |
| 프로토 | 6개 Mock 영상 데이터 + 종목별 채널 내 검색 URL 생성 |
| 프로덕션 | YouTube Data API v3로 실시간 영상 검색 (channelId + keyword) |
| 추천 연동 | 각 활동에 `youtubeKeyword` 필드 → 추천 결과에서 바로 검색 링크 |

### 5.6 수업 기록

| 항목 | 상세 |
|------|------|
| 기록 시점 | 수업스케치에서 "수업 결정" 버튼 클릭 시 (추후: 수동 기록 추가) |
| 저장 항목 | 학급ID, 활동명, 영역, 세부영역, 날짜, 메모 |
| 표시 | 학급 탭 > 수업 이력 뷰 (최근 20건) |
| 학급 목록 반영 | 마지막 활동, 마지막 영역, 마지막 수업일 표시 |
| 영역 분포 | 학급별 운동/스포츠/표현 수업 횟수 (향후 차트) |

### 5.7 홈 대시보드 (🏠 오늘)

각 탭의 핵심 정보를 요약하여 보여주는 허브 역할.

**구성 섹션:**

| 섹션 | 내용 | 연결 |
|------|------|------|
| 날씨 미니 위젯 | 하늘상태 + 기온 + 미세먼지 + 야외 판정 | → 🌤️ 날씨 탭 |
| 오늘 시간표 | 오늘 요일의 교시별 학급 리스트 + 현재 교시 표시 | → 📅 시간표 탭 |
| 최근 수업 | 최근 5건의 수업 기록 (학급 + 활동 + 날짜) | → ✏️ 수업스케치 탭 |
| 학급 현황 | 학년별 학급 수 요약 | → 📋 학급 탭 |

**"오늘의 수업 설계하기" CTA 버튼:**
- 현재 교시의 학급이 있으면 → 해당 학급으로 수업스케치 이동
- 없으면 → 수업스케치 탭으로 이동

---

## 6. 데이터 모델 & Firebase 스키마

### 6.1 Firestore 컬렉션 구조

```
/users/{uid}
  ├── displayName: string
  ├── email: string
  ├── schoolName: string (선택)
  ├── schoolLevel: "초등" | "중등" | "고등"
  ├── schoolLocation: { lat, lng }
  ├── createdAt: timestamp
  └── updatedAt: timestamp

/users/{uid}/config
  └── classSetup
        ├── schoolLevel: string
        ├── grades: [{ grade, count, students[] }]
        └── updatedAt: timestamp

/users/{uid}/classes/{classId}
  ├── grade: string          // "3학년"
  ├── classNum: number       // 1
  ├── studentCount: number   // 25
  ├── lastActivity: string
  ├── lastDomain: string
  ├── lastDate: string
  ├── createdAt: timestamp
  └── updatedAt: timestamp

/users/{uid}/classes/{classId}/roster/{studentId}
  ├── num: number            // 1
  ├── name: string           // "김민준"
  ├── gender: string         // "남" | "여" | ""
  ├── note: string           // 특이사항
  └── updatedAt: timestamp

/users/{uid}/classes/{classId}/records/{recordId}
  ├── activityName: string   // "발야구"
  ├── activityId: number     // ACTIVITIES_DB의 id
  ├── domain: string         // "스포츠"
  ├── subDomain: string      // "전략형"
  ├── date: string           // "2026-03-15"
  ├── note: string           // 수업 메모 (선택)
  └── createdAt: timestamp

/users/{uid}/schedule/{dayOfWeek}
  └── periods: [
        { period: 1, classId: "xxx", className: "3-1" },
        { period: 2, classId: "yyy", className: "3-2" },
        ...
      ]

/activities (공유 컬렉션, 읽기 전용)
  └── {activityId}
        ├── name, domain, sub, grades[], indoor, outdoor
        ├── equipment[], duration, difficulty, rainOk
        ├── desc, youtubeKeyword
        ├── schoolLevel: "초등" | "중등" | "고등"
        └── gradeLevel: string  // "기초기술" | "복합·응용기술"
```

### 6.2 Firestore 보안 규칙

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // 사용자 본인 데이터만 읽기/쓰기
    match /users/{uid}/{document=**} {
      allow read, write: if request.auth != null && request.auth.uid == uid;
    }
    // 활동 DB는 인증된 사용자 누구나 읽기 가능
    match /activities/{actId} {
      allow read: if request.auth != null;
      allow write: if false; // 관리자만 (Admin SDK)
    }
  }
}
```

### 6.3 로컬 상태 ↔ Firestore 동기화 전략

```
[앱 상태 (React)] ←→ [Firestore 실시간 리스너]
       ↕
[오프라인 캐시 (Firestore 내장)]
```

- `onSnapshot` 실시간 리스너로 데이터 바인딩
- Firestore의 오프라인 지속성(enablePersistence) 활용
- 충돌 방지: 단일 사용자이므로 last-write-wins 충분
- **초기 개발**: localStorage로 먼저 구현 → Firebase 점진 전환
- 추후 멀티유저 시: 낙관적 업데이트 + 서버 타임스탬프

---

## 7. 외부 API 연동 상세

### 7.1 기상청 단기예보 API

```
엔드포인트: http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getUltraSrtFcst
파라미터:
  - serviceKey: 인증키
  - numOfRows: 60
  - base_date: YYYYMMDD
  - base_time: HHMM (매시간 30분 발표)
  - nx, ny: 격자 좌표 (위경도 → 격자 변환 필요)

사용 카테고리:
  - SKY: 하늘상태 (1맑음, 3구름많음, 4흐림)
  - PTY: 강수형태 (0없음, 1비, 2비눈, 3눈, 5빗방울, 6빗방울눈날림, 7눈날림)
  - T1H: 기온 (℃)
  - RN1: 1시간 강수량 (mm)
  - REH: 습도 (%)
```

### 7.2 에어코리아 대기오염정보 API

```
엔드포인트: http://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getMsrstnAcctoRltmMesureDnsty
파라미터:
  - serviceKey: 인증키
  - stationName: 측정소명 (예: "대전")
  - dataTerm: "DAILY"
  - returnType: "json"

사용 필드:
  - pm10Value: PM10 농도 (㎍/㎥)
  - pm25Value: PM2.5 농도 (㎍/㎥)
  - pm10Grade: 등급 (1좋음, 2보통, 3나쁨, 4매우나쁨)
```

### 7.3 YouTube Data API v3

```
엔드포인트: https://www.googleapis.com/youtube/v3/search
파라미터:
  - key: API 키
  - channelId: UCrFNcTAsT8uv2otdMUf_rwg
  - q: 검색어 (youtubeKeyword)
  - type: video
  - maxResults: 5
  - order: relevance

응답에서 사용:
  - snippet.title
  - snippet.thumbnails.medium.url
  - id.videoId → embed URL 생성
```

### 7.4 API 키 관리
- 개발: `.env.local`에 저장
- 프로덕션: Firebase Cloud Functions에서 프록시 (키 노출 방지)
- 공공데이터포털 API는 일일 1,000회 제한 → 캐싱 필수 (1시간 단위)

---

## 8. 디자인 시스템 (classpet 기반 라이트 테마)

> 기존 다크 테마(`#0C0E14`)에서 classpet 프로젝트의 라이트 테마로 전면 교체.
> 핵심 디자인 요소: **리퀴드 글래스 이펙트** + **크림 배경** + **파스텔 액센트**

### 8.1 색상 팔레트

**배경 계열 (라이트 테마)**
| 토큰 | HEX | 용도 |
|------|-----|------|
| bg | #FFF9F0 | 앱 배경 (크림) |
| surface | rgba(255,255,255,0.55) | 글래스 카드 배경 |
| surface2 | rgba(255,255,255,0.3) | 중첩 글래스 요소 |
| border | rgba(255,255,255,0.6) | 글래스 카드 테두리 |

**텍스트 계열**
| 토큰 | HEX | 용도 |
|------|-----|------|
| text | #2D3748 | 주요 텍스트 (다크 그레이) |
| textMuted | #718096 | 보조 텍스트, 레이블 |
| textDim | #A0AEC0 | 비활성, 힌트 |

**액센트 계열**
| 토큰 | HEX | 용도 |
|------|-----|------|
| primary | #7C9EF5 | 주 액센트 (파란색) |
| secondary | #F5A67C | 보조 액센트 (오렌지) |
| success | #7CE0A3 | 긍정, 야외 가능 |
| warning | #F5E07C | 경고, 주의 (노랑) |
| danger | #F57C7C | 위험, 에러, 실내 추천 (빨강) |

**그라디언트**
| 이름 | 값 | 용도 |
|------|-----|------|
| Primary | #7C9EF5 → #A78BFA | CTA 버튼, 주요 강조 |
| Secondary | #F5A67C → #F5E07C | 보조 강조, 배지 |
| Success | #7CE0A3 → #7CF5D4 | 야외 가능 표시 |

**영역 전용 색상**
| 영역 | HEX | 이모지 |
|------|-----|--------|
| 운동 | #F57C7C | 💪 |
| 스포츠 | #7C9EF5 | ⚽ |
| 표현 | #A78BFA | 🎭 |

**스포츠 중영역 색상**
| 중영역 | HEX |
|--------|-----|
| 기술형 | #7C9EF5 |
| 전략형 | #818CF8 |
| 생태형 | #7CE0A3 |

**탭별 고유 색상**
| 탭 | 색상 | 용도 |
|----|------|------|
| 🏠 오늘 | blue (#7C9EF5) | 홈 |
| 🌤️ 날씨 | mint (#7CE0A3) | 날씨 |
| 📅 시간표 | yellow (#F5E07C) | 시간표 |
| ✏️ 수업스케치 | pink (#F5A67C) | 수업설계 |
| 📋 학급 | purple (#A78BFA) | 학급 |

### 8.2 리퀴드 글래스 이펙트

```css
/* 기본 글래스 카드 */
.glass-card {
  background: linear-gradient(
    145deg,
    rgba(255, 255, 255, 0.55),
    rgba(255, 255, 255, 0.2)
  );
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.6);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  border-radius: 16px;
}

/* 강조 글래스 (상단 탭바 등) */
.glass-strong {
  background: linear-gradient(
    145deg,
    rgba(255, 255, 255, 0.7),
    rgba(255, 255, 255, 0.3)
  );
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.6);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}
```

### 8.3 CSS 모듈 구조

```
css/
├── base/
│   ├── variables.css      # CSS 커스텀 속성 (색상, 간격, 그림자)
│   ├── typography.css     # Pretendard 폰트, 텍스트 스타일
│   └── layout.css         # 컨테이너, 그리드, 기본 레이아웃
├── components/
│   ├── navbar.css         # 상단 탭바 + 모바일 햄버거 메뉴
│   ├── cards.css          # 글래스 카드 스타일
│   ├── modal.css          # 모달/바텀시트
│   ├── buttons.css        # 버튼 스타일
│   ├── forms.css          # 입력 필드, 토글, 드롭다운
│   ├── badges.css         # 태그, 배지, 칩
│   └── weather.css        # 날씨 위젯 전용
└── utilities/
    ├── animations.css     # bounce, wiggle, pulse, sparkle, toast
    ├── glass.css          # 리퀴드 글래스 유틸리티 클래스
    └── responsive.css     # 반응형 유틸리티, 모바일 성능 최적화
```

### 8.4 타이포그래피
- 기본 폰트: **Pretendard** (CDN)
  ```html
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.min.css" />
  ```
- 폴백: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif
- 앱 제목: 21px, 800 weight
- 카드 제목: 14~16px, 700~800 weight
- 본문: 12~13px, 400~600 weight
- 캡션: 9~11px, 600 weight
- letter-spacing: 제목 -0.02em

### 8.5 컴포넌트 규칙

**Border Radius (Tailwind 커스텀):**
| 토큰 | 값 | 용도 |
|------|-----|------|
| rounded-lg | 8px | 칩, 작은 요소 |
| rounded-xl | 16px | 카드, 버튼 |
| rounded-2xl | 20px | 큰 카드, 모달 |
| rounded-3xl | 24px | 모달, 큰 컨테이너 |

**기타:**
- 카드 패딩: 14~16px
- 그리드 갭: 6~14px
- 버튼 active: scale(0.97)
- 상단 탭바: 글래스 배경, sticky 고정
- 모바일: 햄버거 버튼 → 슬라이드 메뉴

### 8.6 애니메이션

| 이름 | 설명 | 용도 |
|------|------|------|
| fadeIn | translateY(8px) → 0, 0.2~0.3s ease | 카드 진입 |
| bounce | 위아래 바운스 | 알림 강조 |
| wiggle | 좌우 흔들림 | 에러, 경고 |
| pulse | opacity 0.5 ↔ 1 | 로딩, 설정 유도 |
| sparkle | scale + opacity | 수업 결정 시 |
| toastIn | translateY(100%) → 0 | 토스트 등장 |
| toastOut | → translateY(100%) | 토스트 퇴장 |

### 8.7 반응형 최적화 (모바일 < 640px)

```css
@media (max-width: 639px) {
  /* 성능 최적화 */
  .glass-card {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background: rgba(255, 255, 255, 0.85); /* 불투명 대체 */
  }

  /* 트랜지션 간소화 */
  * {
    transition-duration: 0.15s !important;
  }

  /* blob 애니메이션 제거 */
  .blob-animation {
    display: none;
  }
}
```

### 8.8 네비게이션

**태블릿/데스크톱 (640px+): 상단 탭바**
```
┌──────────────────────────────────────────────────────┐
│  ☀️ 오늘 체육 뭐하지?                          [⚙️] │
│  ─────────────────────────────────────────────────── │
│  [🏠 오늘] [🌤️ 날씨] [📅 시간표] [✏️ 스케치] [📋 학급] │
│                                                      │
│  ── 글래스 이펙트 배경 ──────────────────────────── │
│  backdrop-filter: blur(20px)                         │
│  border-bottom: 1px solid rgba(255,255,255,0.6)      │
│                                                      │
│  활성 탭: 탭 고유 색상 + 하단 인디케이터 바           │
│  비활성 탭: 회색 텍스트 + 아이콘                      │
│                                                      │
└──────────────────────────────────────────────────────┘
```

**모바일 (<640px): 햄버거 메뉴**
```
┌──────────────────────────────────────────────────────┐
│  [☰]  오늘 체육 뭐하지?                        [⚙️] │
│                                                      │
│  ☰ 터치 시 → 좌측 슬라이드 메뉴 오픈                 │
│  ┌────────────────┐                                  │
│  │ 🏠 오늘         │                                 │
│  │ 🌤️ 날씨        │                                 │
│  │ 📅 시간표       │                                 │
│  │ ✏️ 수업스케치   │                                 │
│  │ 📋 학급         │                                 │
│  │ ─────────────  │                                  │
│  │ ⚙️ 설정        │                                 │
│  └────────────────┘                                  │
│  배경 오버레이 터치 → 메뉴 닫기                       │
│                                                      │
│  활성 메뉴: 탭 고유 색상 배경 + 좌측 바               │
│  비활성 메뉴: 기본 텍스트                             │
│  슬라이드 트랜지션: 0.25s ease                        │
│                                                      │
└──────────────────────────────────────────────────────┘
```

### 8.9 컨테이너 max-width

| 기기 | max-width | 비고 |
|------|-----------|------|
| 모바일 | 100% (패딩 16px) | 풀 너비 |
| 태블릿 | 576px (센터) | 적당한 여백 |
| 데스크톱 | 672px (센터) | 대부분의 콘텐츠 |
| XL | 1000px (센터) | 시간표 그리드 등 넓은 뷰 |

---

## 9. 반응형 디자인

### 9.1 사용 맥락
```
아침 출근 → 데스크톱으로 시간표 확인 + 수업 설계 (넓은 화면, 키보드)
수업 직전 → 태블릿으로 수업스케치 확인 (교실 이동 중)
수업 중   → 모바일로 수업 기록 (운동장, 한 손)
```

### 9.2 브레이크포인트

| 기기 | 너비 | Tailwind | 주요 맥락 |
|------|------|----------|----------|
| 모바일 | ~639px | 기본(sm 미만) | 운동장, 한 손 조작, 수업 중 |
| 태블릿 | 640~1023px | sm~md | 교실 아이패드, 수업안 확인 |
| 데스크톱 | 1024px~ | lg~ | 출근 후 수업 설계, 명단 관리 |

### 9.3 레이아웃 전환

**🏠 오늘 탭**

```
[모바일] 단일 컬럼, 세로 스택
┌──────────────┐
│ 날씨 미니 위젯│
│ 오늘 시간표   │
│ 최근 수업     │
│ 학급 현황     │
└──────────────┘

[태블릿] 단일 컬럼, 여유 패딩 (max-w-xl 센터)

[데스크톱] 2컬럼
┌──────────────┬─────────────────────┐
│ 오늘 시간표  │ 교시 확장 패널       │
│ (좌측 고정)  │ 수업스케치 미리보기  │
│ 날씨 위젯   │ [수업 설계하기]       │
│ 최근 수업   │ 학급 명단 미리보기    │
└──────────────┴─────────────────────┘
```

**✏️ 수업스케치 탭**

```
[모바일] 단일 컬럼, 세로 스택
┌──────────────┐
│ 학급 선택    │
│ 필터 패널    │
│ 추천 결과    │
│ 관련 영상    │
│ 수업 메모    │
└──────────────┘

[데스크톱] 2컬럼
┌──────────────┬─────────────────────┐
│ 필터 패널    │ 추천 결과 카드       │
│ 학급 선택    │ 관련 영상            │
│ 이전 수업    │ 수업 메모            │
│ (좌측)       │ [수업 결정]          │
└──────────────┴─────────────────────┘
```

**📋 학급 탭**

```
[모바일] 학급 목록 → 터치 → 확장
[태블릿] 학급 목록 → 터치 → 하단 확장 (넓게)
[데스크톱] 2컬럼: 좌측 학급 목록 | 우측 명단·이력
```

**📅 시간표 탭**

```
[모바일] 가로 스크롤 그리드 or 오늘 요일만 세로 표시
[태블릿] 5일 × 7교시 풀 그리드
[데스크톱] 풀 그리드 + 우측에 선택 교시 상세 패널
```

### 9.4 네비게이션 전환

```
[모바일 <640px] 상단 헤더 + 햄버거 메뉴
┌──────────────────────────────────────────┐
│  [☰]  오늘 체육 뭐하지?            [⚙️] │
├──────────────────────────────────────────┤
│                                          │
│           콘텐츠 영역                     │
│                                          │
└──────────────────────────────────────────┘
☰ 터치 → 좌측 슬라이드 메뉴 (오버레이)

[태블릿/데스크톱 640px+] 상단 탭바
┌──────────────────────────────────────────┐
│  ☀️ 오늘 체육 뭐하지?              [⚙️] │
│  [🏠오늘][🌤️날씨][📅시간표][✏️스케치][📋학급] │
├──────────────────────────────────────────┤
│                                          │
│           콘텐츠 영역                     │
│                                          │
└──────────────────────────────────────────┘
```

### 9.5 터치/클릭 타겟
| 기기 | 최소 타겟 사이즈 |
|------|----------------|
| 모바일 | 44×44px (Apple HIG) |
| 태블릿 | 44×44px |
| 데스크톱 | 32×32px (마우스 정밀) |

### 9.6 폰트 스케일
| 요소 | 모바일 | 태블릿 | 데스크톱 |
|------|--------|--------|---------|
| 페이지 제목 | 21px | 24px | 28px |
| 카드 제목 | 14px | 16px | 18px |
| 본문 | 13px | 14px | 15px |
| 캡션 | 11px | 12px | 13px |

---

## 10. 활동 데이터베이스

### 10.1 활동 스키마

```typescript
interface Activity {
  id: number;
  name: string;              // "발야구(킥런볼)"
  domain: "운동" | "스포츠" | "표현";
  sub: string;               // "전략형"
  grades: string[];          // ["3학년","4학년","5학년","6학년"]
  schoolLevel: "초등" | "중등" | "고등";
  indoor: boolean;
  outdoor: boolean;
  equipment: string[];       // ["발야구공","콘"]
  duration: number;          // 분 단위
  difficulty: 1 | 2 | 3;    // 1쉬움 ~ 3어려움
  rainOk: boolean;           // 비/실내에서 가능 여부
  desc: string;
  youtubeKeyword: string;    // 양수쌤 채널 검색 키워드
  gradeLevel: string;        // "기초기술" | "복합·응용기술"
}
```

### 10.2 초기 활동 목록 (20개, 초등)

**운동 영역 (5개)**
| # | 활동 | 중영역 | 학년 | 실내 | 시간 | 난이도 |
|---|------|--------|------|------|------|--------|
| 1 | 줄넘기 | 체력 운동 | 3-6 | ✅ | 20분 | ⭐ |
| 2 | 달리기 | 체력 운동 | 3-6 | ❌ | 30분 | ⭐ |
| 3 | 체력 서킷 | 체력 운동 | 5-6 | ✅ | 40분 | ⭐⭐ |
| 4 | 요가·스트레칭 | 건강 활동 | 3-6 | ✅ | 30분 | ⭐ |
| 5 | 안전교육(CPR) | 건강 활동 | 5-6 | ✅ | 40분 | ⭐⭐ |

**스포츠 영역 (12개)**
| # | 활동 | 중영역 | 학년 | 실내 | 시간 | 난이도 |
|---|------|--------|------|------|------|--------|
| 6 | 농구 드리블 | 기술형 | 3-6 | ✅ | 30분 | ⭐⭐ |
| 7 | 배드민턴 | 기술형 | 4-6 | ✅ | 40분 | ⭐⭐ |
| 8 | 티볼 | 기술형 | 3-6 | ❌ | 40분 | ⭐⭐ |
| 9 | 매트 운동 | 기술형 | 3-5 | ✅ | 40분 | ⭐⭐ |
| 10 | 피구 | 전략형 | 3-6 | ❌ | 40분 | ⭐ |
| 11 | 발야구(킥런볼) | 전략형 | 3-6 | ❌ | 40분 | ⭐⭐ |
| 12 | 농구 게임 | 전략형 | 5-6 | ✅ | 40분 | ⭐⭐⭐ |
| 13 | 축구 | 전략형 | 3-6 | ❌ | 40분 | ⭐⭐ |
| 14 | 넷볼 | 전략형 | 4-6 | ✅ | 40분 | ⭐⭐ |
| 15 | 플라잉디스크 | 전략형 | 4-6 | ❌ | 40분 | ⭐⭐ |
| 16 | 오리엔티어링 | 생태형 | 5-6 | ❌ | 40분 | ⭐⭐ |

**표현 영역 (3개)**
| # | 활동 | 중영역 | 학년 | 실내 | 시간 | 난이도 |
|---|------|--------|------|------|------|--------|
| 17 | 창작 댄스 | 현대 표현 | 3-6 | ✅ | 40분 | ⭐⭐ |
| 18 | 줄넘기 댄스 | 스포츠 표현 | 3-6 | ✅ | 40분 | ⭐⭐ |
| 19 | 탈춤·민속놀이 | 전통 표현 | 3-6 | ✅ | 40분 | ⭐⭐ |

### 10.3 활동 DB 확장 계획
- Phase 2: 인라인스케이트(생태형), 수영(건강활동) 등 추가
- Phase 3: 중학교 활동 추가 (`schoolLevel: "중등"`)
- Phase 4: 고등학교 활동 추가 (`schoolLevel: "고등"`)
- Phase 5: 교사 커뮤니티 활동 공유 (Firestore 공유 컬렉션)
- Phase 6: 활동별 상세 지도안 (준비-전개-정리), 평가 루브릭

---

## 11. PWA 설정

### 11.1 manifest.json
```json
{
  "name": "오늘 체육 뭐하지?",
  "short_name": "체육뭐하지",
  "description": "체육교사를 위한 수업·학급 관리 앱",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#FFF9F0",
  "theme_color": "#7C9EF5",
  "orientation": "portrait",
  "icons": [
    { "src": "/icon-192.png", "sizes": "192x192", "type": "image/png" },
    { "src": "/icon-512.png", "sizes": "512x512", "type": "image/png" }
  ]
}
```

### 11.2 서비스워커 캐싱 전략
| 리소스 | 전략 | 이유 |
|--------|------|------|
| HTML/JS/CSS | Cache First + Network Fallback | 앱 셸 즉시 로드 |
| 활동 DB | Stale While Revalidate | 자주 안 바뀜 |
| 날씨 API | Network First (1시간 캐시) | 실시간성 중요 |
| YouTube 데이터 | Network First (6시간 캐시) | 적당한 갱신 |
| 폰트/이미지 | Cache First | 불변 리소스 |

---

## 12. 인증 (Google OAuth)

### 12.1 로그인 플로우
```
앱 진입 → Firebase Auth 상태 체크
├── 미인증 → 로그인 화면 (Google 로그인 버튼)
│              └── signInWithPopup(GoogleAuthProvider)
│                    └── 성공 → Firestore에 사용자 문서 생성/업데이트
│                          └── 학급 설정 여부 체크 → 홈 or 설정 위저드
└── 인증됨 → Firestore에서 데이터 로드 → 홈
```

### 12.2 사용자 데이터 구조
- Firebase Auth에서 uid, displayName, email, photoURL 제공
- Firestore `/users/{uid}`에 앱 고유 데이터 저장
- 로그아웃 시 로컬 캐시 클리어

---

## 13. 개발 로드맵

### Phase 1: 프로젝트 초기화 + 홈/시간표/학급 (2주)
- [ ] Vite + React + Tailwind 프로젝트 셋업
- [ ] classpet 기반 디자인 시스템 (tailwind.config.js + CSS 모듈)
- [ ] React Router 탭 라우팅 (5탭: 오늘/날씨/시간표/수업스케치/학급)
- [ ] 상단 탭바 (태블릿/데스크톱) + 햄버거 메뉴 (모바일)
- [ ] 학급 설정 위저드 (학교급 선택 추가)
- [ ] 학급 명단 CRUD
- [ ] 시간표 관리 (그리드 UI + 편집 모드)
- [ ] 홈 대시보드 (시간표 요약 + 학급 현황)
- [ ] 활동 DB (하드코딩 → 별도 JSON)
- [ ] localStorage 기반 데이터 저장

### Phase 2: 날씨 API + 수업스케치 (1주)
- [ ] 공공데이터포털 API 키 발급 (기상청 + 에어코리아)
- [ ] 날씨 상세 탭 구현
- [ ] 홈 날씨 미니 위젯
- [ ] 야외수업 자동 판단 로직
- [ ] 수업스케치 탭 (추천 필터 + 결과 카드 + 메모)
- [ ] 양수쌤 유튜브 연동 (Mock → 실데이터)
- [ ] 수업 기록 저장/표시

### Phase 3: Firebase 연동 (1주)
- [ ] Firebase 프로젝트 생성 + 초기화
- [ ] Google OAuth 로그인/로그아웃
- [ ] Firestore 스키마 구현 (schedule 포함)
- [ ] localStorage → Firestore 마이그레이션
- [ ] 보안 규칙 설정
- [ ] 오프라인 persistence 활성화

### Phase 4: PWA & 배포 (3일)
- [ ] Workbox 서비스워커 설정
- [ ] manifest.json + 앱 아이콘
- [ ] Firebase Hosting 배포
- [ ] 커스텀 도메인 연결 (선택)

### Phase 5: 고도화 (지속)
- [ ] 도구 탭 추가 (팀편성, 스코어보드, 타이머)
- [ ] 수업 기록 수동 추가/수정/삭제
- [ ] 학급별 영역 분포 차트 (recharts)
- [ ] 연간 수업 계획
- [ ] 활동 DB 확장
- [ ] 파이썬 백엔드 (고도화 시)
- [ ] 다크/라이트 테마 전환

---

## 14. 프로젝트 구조 (목표)

```
오늘체육뭐하지/
├── public/
│   ├── manifest.json
│   ├── icon-192.png
│   ├── icon-512.png
│   └── sw.js
├── src/
│   ├── main.jsx                # 엔트리 포인트
│   ├── App.jsx                 # 라우터 + 레이아웃
│   ├── components/
│   │   ├── layout/
│   │   │   ├── Header.jsx
│   │   │   ├── TopNav.jsx       # 상단 탭바 (태블릿/데스크톱)
│   │   │   ├── HamburgerMenu.jsx  # 햄버거 슬라이드 메뉴 (모바일)
│   │   ├── home/
│   │   │   ├── WeatherMini.jsx
│   │   │   ├── TodaySchedule.jsx
│   │   │   ├── RecentLessons.jsx
│   │   │   └── ClassSummary.jsx
│   │   ├── weather/
│   │   │   ├── WeatherDetail.jsx
│   │   │   ├── AirQuality.jsx
│   │   │   └── OutdoorJudge.jsx
│   │   ├── schedule/
│   │   │   ├── ScheduleGrid.jsx
│   │   │   └── ScheduleEditor.jsx
│   │   ├── sketch/
│   │   │   ├── FilterPanel.jsx
│   │   │   ├── ResultCard.jsx
│   │   │   ├── VideoSection.jsx
│   │   │   └── LessonMemo.jsx
│   │   └── classes/
│   │       ├── ClassList.jsx
│   │       ├── RosterEditor.jsx
│   │       ├── BulkImport.jsx
│   │       └── HistoryView.jsx
│   ├── pages/
│   │   ├── HomePage.jsx        # 🏠 오늘
│   │   ├── WeatherPage.jsx     # 🌤️ 날씨
│   │   ├── SchedulePage.jsx    # 📅 시간표
│   │   ├── SketchPage.jsx      # ✏️ 수업스케치
│   │   ├── ClassesPage.jsx     # 📋 학급
│   │   ├── SetupWizard.jsx
│   │   └── LoginPage.jsx
│   ├── hooks/
│   │   ├── useAuth.js          # Firebase Auth
│   │   ├── useClassManager.js  # 학급 CRUD + Firestore 동기화
│   │   ├── useSchedule.js      # 시간표 관리
│   │   ├── useWeather.js       # 날씨 API + 캐싱
│   │   └── useRecommend.js     # 추천 엔진
│   ├── services/
│   │   ├── firebase.js         # Firebase 초기화
│   │   ├── weatherApi.js       # 기상청 + 에어코리아
│   │   └── youtubeApi.js       # YouTube Data API
│   ├── data/
│   │   ├── activities.json     # 활동 DB
│   │   ├── domains.js          # 2022 교육과정 영역 정의
│   │   └── constants.js        # 색상, 설정값
│   ├── utils/
│   │   ├── gridConvert.js      # 위경도 → 기상청 격자 변환
│   │   ├── dateUtils.js
│   │   ├── scheduleUtils.js    # 현재 교시 계산 등
│   │   └── generateId.js
│   └── styles/
│       ├── globals.css         # Tailwind base + 커스텀
│       └── css/
│           ├── base/
│           │   ├── variables.css
│           │   ├── typography.css
│           │   └── layout.css
│           ├── components/
│           │   ├── navbar.css
│           │   ├── cards.css
│           │   ├── modal.css
│           │   └── buttons.css
│           └── utilities/
│               ├── animations.css
│               ├── glass.css
│               └── responsive.css
├── .env.local                  # API 키 (git 미추적)
├── firebase.json               # Firebase 호스팅 설정
├── firestore.rules             # 보안 규칙
├── tailwind.config.js
├── vite.config.js
├── PRD.md                      # 이 문서
├── CLAUDE.md                   # Claude Code 컨텍스트
└── package.json
```

---

## 15. 제약사항 및 고려사항

### 기술적 제약
- 공공데이터포털 API: 일일 호출 제한 (일반 1,000회/일)
- YouTube Data API: 일일 쿼터 10,000 유닛 (search = 100유닛/회 → 일 100회)
- Firestore 무료 티어: 일 읽기 50K, 쓰기 20K (개인 사용 충분)
- PWA iOS 제한: 푸시 알림 미지원 (iOS 16.4+부터 지원), 서비스워커 캐시 제한

### 개인정보
- 학생 이름은 교사 본인 계정에만 저장 (Firestore 보안 규칙)
- 학생 이름 외 개인정보(주민번호, 주소 등) 일절 수집하지 않음
- 추후 배포 시 개인정보 처리방침 필요

### 접근성
- 색상 대비: WCAG AA 기준 충족 (라이트 테마에서 충분한 대비)
- 터치 타겟: 최소 44px (모바일 접근성)
- 운동장에서 사용: 높은 명도 대비, 큰 텍스트 옵션 (향후)

---

## 16. 향후 확장 계획

### 16.1 도구 탭 (Phase 5)
기존 PRD의 도구 기능을 별도 탭으로 추가:
- **팀 편성기**: 학급 명단 기반, 2~6팀, 성별 균형 편성
- **스코어보드**: A팀 vs B팀, +/- 점수, 초기화
- **타이머**: 프리셋 5종 (3/5/10/15/20분), 인터벌 타이머

### 16.2 파이썬 백엔드 (고도화 시)
- API 프록시 서버 (키 보호)
- AI 기반 수업 추천 고도화
- 활동 DB 관리 어드민

### 16.3 중·고등 활동 DB 확장
- 중학교: 축구, 농구, 배구, 수영 등 정규 종목 추가
- 고등학교: 선택 과목별 활동 (스포츠 생활, 체육 탐구 등)
- 학교급별 교육과정 연계 메타데이터

### 16.4 교사 커뮤니티 기능
- 활동 공유: 커스텀 활동 등록 + 공유
- 수업안 공유: 수업 설계 템플릿 공유
- 평가 루브릭 공유

---

## 부록 A: 프로토타입 참조

현재 프로토타입 파일: `app_v3.jsx` (React 단일 파일, 1,266줄)

프로토타입에서 **이미 구현된 기능:**
- ✅ 5탭 네비게이션 (홈/추천/학급/도구/영상)
- ✅ 학급 설정 3단계 위저드
- ✅ 학급 명단 CRUD (개별 + 일괄 + 삭제 + 번호 재정렬)
- ✅ 성별 입력/통계
- ✅ 날씨 위젯 (Mock 데이터)
- ✅ 수업 추천 엔진 (3단 필터 + 날씨 자동 필터)
- ✅ 양수쌤 유튜브 연동 (Mock + 검색 URL)
- ✅ 팀 편성기 (랜덤 + 성별 균형, 명단 기반)
- ✅ 스코어보드 (A vs B)
- ✅ 타이머 (프리셋 5종)
- ✅ 수업 기록 저장/표시
- ✅ 다크 테마 디자인 시스템
- ✅ Firestore-ready 데이터 구조 (useClassManager 훅)

프로토타입에서 **v2에서 변경/추가:**
- 🔄 5탭 → 새 5탭 (오늘/날씨/시간표/수업스케치/학급)
- 🔄 다크 테마 → classpet 라이트 테마 + 리퀴드 글래스
- ➕ 시간표 관리 (완전 신규)
- ➕ 수업스케치 통합 탭 (추천+설계+영상)
- ➕ 날씨 독립 상세 탭
- ➕ 홈 대시보드 허브 (각 탭 요약)
- ➕ 학교급 선택 (초·중·고)
- ⏸️ 도구 탭 → Phase 5로 이동

프로토타입에서 **Mock/미구현:**
- ⏳ 날씨 API 실데이터 (현재 Mock)
- ⏳ YouTube API 실데이터 (현재 Mock 6개)
- ⏳ Firebase Auth (로그인 없음)
- ⏳ Firestore 연동 (로컬 상태만)
- ⏳ PWA 설정 (서비스워커, manifest)
- ⏳ 수업 기록 수동 추가/수정
- ⏳ 컴포넌트 분리 (단일 파일)
- ⏳ Tailwind 마이그레이션 (현재 inline style)

---

*끝.*
